import{Z as y}from"./index.esm-5156d63d.js";import{B as P,L as w}from"./Breadcrumb-a77a5cca.js";import{V as k,S as m}from"./sweetalert2.all-bddd6dd7.js";import{u as x,r as u,o as n,c as l,a as h,b as e,g as I,h as S,t as d,w as B,d as f,v as _,n as b,f as c,F as D,i as F}from"./app-9aaf36b4.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";const N={components:{Breadcrumb:P,Head:y,VueGoodTable:k},layout:w,setup(){return{form:x({name:null,number:null})}},data(){return{isLoading:!1,columns:[{label:"Nombre",field:"name",filterOptions:{enabled:!0,placeholder:"Buscar por Nombre"}},{label:"Numero",field:"number",filterOptions:{enabled:!0,placeholder:"Buscar por Numero"}},{label:"Opciones",field:"id",slot:"modify"}],rows:[],totalRecords:0,serverParams:{columnFilters:{},sort:{field:"",type:""},page:1,perPage:10},paginationOptions:{enabled:!0,perPage:10,perPageDropdown:[10,20,50,100],nav:!0},title_modal:"",crud:"",updateId:0,deleteId:0}},methods:{loadItems(){axios.post("cellphone/getData",this.serverParams).then(o=>{this.rows=o.data.data,this.totalRecords=o.data.total})},updateParams(o){this.serverParams=Object.assign({},this.serverParams,o)},onPageChange(o){this.updateParams({page:o.currentPage}),this.loadItems()},onPerPageChange(o){this.updateParams({perPage:o.currentPerPage}),this.loadItems()},onSortChange(o){this.updateParams({sortKey:o[0].field,sortOrder:o[0].type}),this.loadItems()},onColumnFilter(o){this.updateParams(o),this.loadItems()},form_create(){this.title_modal="Agregar Dispositivo",this.crud="create"},form_show(o){this.title_modal="Actualizar Dispositivo",this.crud="update",this.updateId=o,this.show()},show(){const o=`/cellphone/${this.updateId}`;axios.get(o).then(t=>{this.form.name=t.data.name,this.form.number=t.data.number}).catch(t=>{console.log(t)})},delete(){const o=`/cellphone/${this.deleteId}`;axios.delete(o).then(t=>{m.fire({icon:"success",title:"Plan Eliminado!",text:"La información se ha eliminado correctamente."}),this.loadItems()}).catch(t=>{console.log(t)})},form_delete(o){this.deleteId=o,m.fire({title:"Vas a Elimminar el Estado?",showDenyButton:!0,confirmButtonText:"Si"}).then(t=>{t.isConfirmed&&this.delete()})},send(){switch(this.crud){case"create":this.form.post("/cellphone",{preserveScroll:!0,onSuccess:()=>{this.form.reset(),m.fire({icon:"success",title:"¡Guardado exitoso!",text:"La información se ha guardado correctamente."}),$("#modalCrud").modal("hide"),this.loadItems()}});break;case"update":this.form.put(`/cellphone/${this.updateId}`,{preserveScroll:!0,onSuccess:()=>{this.form.reset(),m.fire({icon:"success",title:"¡Actualización exitosa!",text:"La información se ha actualizado correctamente."}),$("#modalCrud").modal("hide"),this.loadItems()}});break}}},mounted(){this.loadItems()}},V={class:"content mt-3"},O={class:"container-fluid"},z=e("i",{class:"fas fa-plus"},null,-1),R=e("br",null,null,-1),A=e("br",null,null,-1),E={key:0},T=["onClick"],G=e("i",{class:"fas fa-pencil"},null,-1),H=[G],M=["onClick"],U=e("i",{class:"fas fa-trash"},null,-1),j=[U],K={key:1},Z={key:2},q={class:"badge rounded-pill bg-primary"},J={class:"modal fade",id:"modalCrud",tabindex:"-1","aria-labelledby":"modalCrud","aria-hidden":"true"},Q={class:"modal-dialog modal-lg"},W={class:"modal-content"},X={class:"modal-header"},Y={class:"modal-title",id:"exampleModalLabel"},ee=e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")],-1),oe={class:"modal-body"},te={class:"form-group"},ae=e("label",{for:"name",class:"col-form-label"},"Nombre:",-1),se={key:0,id:"nameFeedback",class:"invalid-feedback"},re={class:"form-group"},ne=e("label",{for:"number",class:"col-form-label"},"Numero:",-1),le={key:0,id:"numberFeedback",class:"invalid-feedback"},ie={class:"modal-footer"},de=e("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal"},"Cerrar",-1),ce=["disabled"];function me(o,t,ue,s,i,r){const g=u("Head"),p=u("Breadcrumb"),v=u("vue-good-table");return n(),l(D,null,[h(g,{title:"Dispositivos"}),h(p,{"back-title":"Dashboard","back-link":"/dashboard","active-title":"Dispositivos"}),e("section",V,[e("div",O,[e("button",{class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...a)=>r.form_create&&r.form_create(...a)),"data-toggle":"modal","data-target":"#modalCrud"},[z,I(" Agregar Dispositivo")]),R,A,h(v,{mode:"remote",onPageChange:r.onPageChange,onSortChange:r.onSortChange,onColumnFilter:r.onColumnFilter,onPerPageChange:r.onPerPageChange,totalRows:i.totalRecords,isLoading:i.isLoading,"pagination-options":{enabled:!0},rows:i.rows,columns:i.columns,styleClass:"vgt-table condensed bordered striped"},{"table-row":S(a=>[a.column.field=="id"?(n(),l("div",E,[e("button",{class:"btn btn-primary btn-sm","data-toggle":"modal","data-target":"#modalCrud",onClick:C=>r.form_show(a.row.id)},H,8,T),e("button",{class:"btn btn-danger btn-sm",onClick:C=>r.form_delete(a.row.id)},j,8,M)])):c("",!0),a.column.field=="color"?(n(),l("div",K,[e("span",{class:"badge rounded-pill bg-secondary",style:F({"background-color":a.row.color+" !important"})},d(a.row.color),5)])):c("",!0),a.column.field=="percentage"?(n(),l("div",Z,[e("span",q,d(a.row.percentage)+" %",1)])):c("",!0)]),_:1},8,["onPageChange","onSortChange","onColumnFilter","onPerPageChange","totalRows","isLoading","rows","columns"])]),e("div",J,[e("div",Q,[e("div",W,[e("div",X,[e("h5",Y,d(i.title_modal),1),ee]),e("form",{onSubmit:t[3]||(t[3]=B((...a)=>r.send&&r.send(...a),["prevent"])),autocomplete:"off"},[e("div",oe,[e("div",te,[ae,f(e("input",{type:"text",class:b(["form-control",{"is-invalid":s.form.errors.name}]),id:"name","onUpdate:modelValue":t[1]||(t[1]=a=>s.form.name=a)},null,2),[[_,s.form.name]]),s.form.errors.name?(n(),l("div",se,d(s.form.errors.name),1)):c("",!0)]),e("div",re,[ne,f(e("input",{type:"text",class:b(["form-control",{"is-invalid":s.form.errors.number}]),id:"number","onUpdate:modelValue":t[2]||(t[2]=a=>s.form.number=a)},null,2),[[_,s.form.number]]),s.form.errors.number?(n(),l("div",le,d(s.form.errors.number),1)):c("",!0)])]),e("div",ie,[de,e("button",{type:"submit",class:b(["btn btn-primary",{"opacity-25":s.form.processing}]),disabled:s.form.processing},"Guardar",10,ce)])],32)])])])])],64)}const pe=L(N,[["render",me]]);export{pe as default};
