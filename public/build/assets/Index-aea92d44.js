import{Z as P}from"./index.esm-5156d63d.js";import{B as y,L as k}from"./Breadcrumb-a77a5cca.js";import{V as w,S as m}from"./sweetalert2.all-bddd6dd7.js";import{u as x,r as h,o as l,c as n,a as f,b as e,g as I,h as S,t as d,w as F,d as _,v as g,n as u,f as i,F as B,i as L}from"./app-9aaf36b4.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";const E={components:{Breadcrumb:y,Head:P,VueGoodTable:w},layout:k,setup(){return{form:x({name:null,color:null,percentage:null})}},data(){return{isLoading:!1,columns:[{label:"Nombre",field:"name",filterOptions:{enabled:!0,placeholder:"Buscar por Nombre"}},{label:"Color",field:"color"},{label:"Porcentaje",field:"percentage"},{label:"Opciones",field:"id",slot:"modify"}],rows:[],totalRecords:0,serverParams:{columnFilters:{},sort:{field:"",type:""},page:1,perPage:10},paginationOptions:{enabled:!0,perPage:10,perPageDropdown:[10,20,50,100],nav:!0},title_modal:"",crud:"",updateId:0,deleteId:0}},methods:{loadItems(){axios.post("status/getData",this.serverParams).then(o=>{this.rows=o.data.data,this.totalRecords=o.data.total})},updateParams(o){this.serverParams=Object.assign({},this.serverParams,o)},onPageChange(o){this.updateParams({page:o.currentPage}),this.loadItems()},onPerPageChange(o){this.updateParams({perPage:o.currentPerPage}),this.loadItems()},onSortChange(o){this.updateParams({sortKey:o[0].field,sortOrder:o[0].type}),this.loadItems()},onColumnFilter(o){this.updateParams(o),this.loadItems()},form_create(){this.title_modal="Agregar Plan",this.crud="create"},form_show(o){this.title_modal="Actualizar Plan",this.crud="update",this.updateId=o,this.show()},show(){const o=`/status/${this.updateId}`;axios.get(o).then(t=>{this.form.name=t.data.name,this.form.color=t.data.color,this.form.percentage=t.data.percentage}).catch(t=>{console.log(t)})},delete(){const o=`/status/${this.deleteId}`;axios.delete(o).then(t=>{m.fire({icon:"success",title:"Estado Eliminado!",text:"La información se ha eliminado correctamente."}),this.loadItems()}).catch(t=>{console.log(t)})},form_delete(o){this.deleteId=o,m.fire({title:"Vas a Elimminar el Estado?",showDenyButton:!0,confirmButtonText:"Si"}).then(t=>{t.isConfirmed&&this.delete()})},send(){switch(this.crud){case"create":this.form.post("/status",{preserveScroll:!0,onSuccess:()=>{this.form.reset(),m.fire({icon:"success",title:"¡Guardado exitoso!",text:"La información se ha guardado correctamente."}),$("#modalCrud").modal("hide"),this.loadItems()}});break;case"update":this.form.put(`/status/${this.updateId}`,{preserveScroll:!0,onSuccess:()=>{this.form.reset(),m.fire({icon:"success",title:"¡Actualización exitosa!",text:"La información se ha actualizado correctamente."}),$("#modalCrud").modal("hide"),this.loadItems()}});break}}},mounted(){this.loadItems()}},N={class:"content mt-3"},D={class:"container-fluid"},z=e("i",{class:"fas fa-plus"},null,-1),O=e("br",null,null,-1),R=e("br",null,null,-1),A={key:0},T=["onClick"],j=e("i",{class:"fas fa-pencil"},null,-1),G=[j],H=["onClick"],M=e("i",{class:"fas fa-trash"},null,-1),U=[M],K={key:1},Z={key:2},q={class:"badge rounded-pill bg-primary"},J={class:"modal fade",id:"modalCrud",tabindex:"-1","aria-labelledby":"modalCrud","aria-hidden":"true"},Q={class:"modal-dialog modal-lg"},W={class:"modal-content"},X={class:"modal-header"},Y={class:"modal-title",id:"exampleModalLabel"},ee=e("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close"},[e("span",{"aria-hidden":"true"},"×")],-1),oe={class:"modal-body"},te={class:"form-group"},ae=e("label",{for:"name",class:"col-form-label"},"Nombre:",-1),se={key:0,id:"nameFeedback",class:"invalid-feedback"},re={class:"form-group"},le=e("label",{for:"color",class:"col-form-label"},"color:",-1),ne={key:0,id:"colorFeedback",class:"invalid-feedback"},de={class:"form-group"},ie=e("label",{for:"percentage",class:"col-form-label"},"Porcentaje:",-1),ce={key:0,id:"percentageFeedback",class:"invalid-feedback"},me={class:"modal-footer"},ue=e("button",{type:"button",class:"btn btn-danger","data-dismiss":"modal"},"Cerrar",-1),he=["disabled"];function fe(o,t,_e,s,c,r){const b=h("Head"),p=h("Breadcrumb"),v=h("vue-good-table");return l(),n(B,null,[f(b,{title:"Estados"}),f(p,{"back-title":"Dashboard","back-link":"/dashboard","active-title":"Estados"}),e("section",N,[e("div",D,[e("button",{class:"btn btn-primary btn-sm",onClick:t[0]||(t[0]=(...a)=>r.form_create&&r.form_create(...a)),"data-toggle":"modal","data-target":"#modalCrud"},[z,I(" Agregar Estados")]),O,R,f(v,{mode:"remote",onPageChange:r.onPageChange,onSortChange:r.onSortChange,onColumnFilter:r.onColumnFilter,onPerPageChange:r.onPerPageChange,totalRows:c.totalRecords,isLoading:c.isLoading,"pagination-options":{enabled:!0},rows:c.rows,columns:c.columns,styleClass:"vgt-table condensed bordered striped"},{"table-row":S(a=>[a.column.field=="id"?(l(),n("div",A,[e("button",{class:"btn btn-primary btn-sm","data-toggle":"modal","data-target":"#modalCrud",onClick:C=>r.form_show(a.row.id)},G,8,T),e("button",{class:"btn btn-danger btn-sm",onClick:C=>r.form_delete(a.row.id)},U,8,H)])):i("",!0),a.column.field=="color"?(l(),n("div",K,[e("span",{class:"badge rounded-pill bg-secondary",style:L({"background-color":a.row.color+" !important"})},d(a.row.color),5)])):i("",!0),a.column.field=="percentage"?(l(),n("div",Z,[e("span",q,d(a.row.percentage)+" %",1)])):i("",!0)]),_:1},8,["onPageChange","onSortChange","onColumnFilter","onPerPageChange","totalRows","isLoading","rows","columns"])]),e("div",J,[e("div",Q,[e("div",W,[e("div",X,[e("h5",Y,d(c.title_modal),1),ee]),e("form",{onSubmit:t[4]||(t[4]=F((...a)=>r.send&&r.send(...a),["prevent"])),autocomplete:"off"},[e("div",oe,[e("div",te,[ae,_(e("input",{type:"text",class:u(["form-control",{"is-invalid":s.form.errors.name}]),id:"name","onUpdate:modelValue":t[1]||(t[1]=a=>s.form.name=a)},null,2),[[g,s.form.name]]),s.form.errors.name?(l(),n("div",se,d(s.form.errors.name),1)):i("",!0)]),e("div",re,[le,_(e("input",{type:"color",class:u(["form-control",{"is-invalid":s.form.errors.color}]),id:"email","onUpdate:modelValue":t[2]||(t[2]=a=>s.form.color=a)},null,2),[[g,s.form.color]]),s.form.errors.color?(l(),n("div",ne,d(s.form.errors.color),1)):i("",!0)]),e("div",de,[ie,_(e("input",{type:"number",class:u(["form-control",{"is-invalid":s.form.errors.percentage}]),id:"description","onUpdate:modelValue":t[3]||(t[3]=a=>s.form.percentage=a)},null,2),[[g,s.form.percentage]]),s.form.errors.percentage?(l(),n("div",ce,d(s.form.errors.percentage),1)):i("",!0)])]),e("div",me,[ue,e("button",{type:"submit",class:u(["btn btn-primary",{"opacity-25":s.form.processing}]),disabled:s.form.processing},"Guardar",10,he)])],32)])])])])],64)}const Pe=V(E,[["render",fe]]);export{Pe as default};
